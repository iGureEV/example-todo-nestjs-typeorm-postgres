# ToDo лист с использованием NestJS и PostgreSQL

Под капотом используется `TypeORM`, `Jest`, `pg-mem`

## Установка

- `npm install` - Установка npm пакетов
- `npm run docker:up` - Установка и инициализация Docker контейнеров

## Запуск

1. Убедиться что Docker контейнеры группы ***todolist*** запущены.
1. Запустить проект:   `npm run start`

## Доступные порты

- http://localhost:3000 - точка доступа API
- http://localhost:8080 - pgAdmin

## Подключение к PostgreSQL

- Из контейнера pgAdmin: host = `postgres`, port = `5432`
- Для сервера API или cтороннего pgAdmin: host = `host.docker.internal`, port = `5435`

## Доступные методы

|   | Endpoint                    |Параметры| Описание|
|---|-----------------------------|---------|----------|
|Описание|||
|| GET / ||Swagger|
|Группы|||
|| GET /groups||Получение только списка групп без задач|
|| GET /groups?extends=true|query-параметр `extends`|Если `true` - Получение списка групп с задачами|
|| GET /groups/{id}||Получение группы с задачами|
|| POST /groups|`Имя`, `Описание`|Создание группы||
|| PATCH /groups/{id}|`Имя`, `Описание`|Изменение группы|
|| DELETE /groups/{id}||Удаление группы и всех задач в ней|
|Задачи|||
|| GET /tasks||Получение всех задач (с группами в которые они входят (если есть))|
|| GET /tasks/{id}||Получение задачи|
|| POST /tasks|`Имя`, `Описание`|Создание задачи|
|| PATCH /tasks/{id}|`Имя`, `Описание`|Изменение задачи|
|| PATCH /tasks/{id}/done|`Флаг завершенности`|Проставить флаг завершенности для задачи|
|| DELETE /tasks/{id}||Удаление задачи|

## Структура базы данных

***Сущность `Task` (задача) содержит следующие поля:***

| Поле                        | Обязательность|
|-----------------------------|---------------|
| Идентификатор задачи|*|
| Имя|*|
| Описание||
| Флаг завершенности||
| Идентификатор группы||
| Дата создания в формате ISO-8601|*|
| Дата обновления в формате ISO-8601||


***Сущность `Group` (группа) содержит следующие поля:***
| Поле                        | Обязательность|
|-----------------------------|---------------|
| Идентификатор группы|*|
| Имя|*|
| Описание||
| Дата создания в формате ISO-8601|*|
| Дата обновления в формате ISO-8601||

Примечания:
- `Имя` - обязательно, только строка и не должно превышать 64 символов. 
- `Описание` - если есть, то только строка и не должно превышать 256 символов.
